# Аналитика дизайна приложения FreeTips (Android)

## 1. Цвета

### Текущее состояние
| Роль | Значение | Использование |
|------|----------|---------------|
| primary | #C5A572 | Кнопки, FAB, акценты, баланс на карте |
| primary_dark | #9A7B4F | — |
| on_primary | #0D1117 | Текст на кнопках, бейдж VIRTUAL |
| surface | #1C2128 | Карточки, нижняя навигация |
| background | #0D1117 | Фон экранов |
| on_surface | #E6EDF3 | Заголовки, основной текст |
| on_surface_variant | #8B949E | Вторичный текст, подписи |
| outline | #484F58 | Разделители (с alpha 0.2) |
| error | #F85149 | Ошибки |
| success | #3FB950 | Иконка успеха |

**Проблемы:**
- В `view_virtual_card.xml` жёстко задан `#1C1B1F` для текста «FT» в чипе — не из палитры.
- Нет единого `text_primary` / `text_secondary` в colors — используются on_surface / on_surface_variant, что ок, но в разметке встречаются прямые ссылки и alpha.

**Рекомендации:**
- Вынести цвет текста на чипе в `colors.xml` (например, `chip_text` или использовать `on_primary`).
- Не использовать alpha для основных текстов без необходимости — задавать цвет из палитры.

---

## 2. Шрифты и размеры текста

### Текущее состояние (размеры в sp)
| Контекст | Размер | Где используется |
|----------|--------|-------------------|
| Заголовок экрана (FreeTips на входе) | 28sp | activity_api_key_entry |
| Заголовок секции | 16sp, 18sp | «Статистика», «История операций», «Заявки на вывод», «Профиль», «Ссылки» |
| Подзаголовок | 14sp | Подпись под заголовком входа, подсказка API |
| Баланс на карте | 20sp | view_virtual_card cardBalance |
| Сумма в списке (крупно) | 18sp | item_payout amount |
| Сумма в списке | 16sp | item_transaction amount |
| Тело карточки | 14sp, 15sp | Статистика, профиль, ссылки |
| Вторичный текст | 12sp, 13sp | Дата, статус, подписи |
| Мелкий текст | 10sp, 11sp | VIRTUAL, БАЛАНС, FT в чипе |

**Проблемы:**
- Нет иерархии через стили: заголовки 16sp и 18sp вперемешку.
- Много «магических» значений (10sp, 11sp, 12sp, 13sp, 14sp, 15sp, 16sp, 18sp, 20sp, 28sp) без общих констант.
- Разный размер заголовков секций: Главная «Статистика» 16sp, Операции «История операций» 18sp, Выводы «Заявки на вывод» 16sp.

**Рекомендации:**
- Ввести в `dimens.xml`: `text_title_large` (20sp), `text_title` (18sp), `text_subtitle` (16sp), `text_body` (14sp), `text_caption` (12sp), `text_label` (10sp).
- Заголовки секций везде 18sp (или один стиль TextAppearance).
- Ошибки и подсказки — 14sp.

---

## 3. Отступы

### Текущее состояние (dimens)
| Имя | Значение | Использование |
|-----|----------|---------------|
| spacing_xs | 4dp | Между датой и статусом в item |
| spacing_sm | 8dp | Между кнопками, между карточкой и списком |
| spacing_md | 16dp | Внутри карточек, между полями формы |
| spacing_lg | 24dp | Между картой и блоком «Статистика», между секциями |
| spacing_xl | 32dp | Перед кнопкой «Выйти» в профиле |
| screen_padding | 20dp | Отступ от краёв экрана |
| card_radius | 12dp | Скругление карточек |
| card_elevation | 2dp | Тень карточек |

**Проблемы:**
- На экране входа верхний отступ заголовка жёстко 40dp — не из dimens.
- В item_transaction дата имеет `marginTop="2dp"` — лучше использовать spacing_xs для единообразия.
- Разные отступы после виртуальной карты: Главная 24dp (spacing_lg), Выводы 16dp (spacing_md), Операции 24dp (spacing_lg) — в Выводах меньше, визуально непоследовательно.
- RecyclerView в Выводах: paddingBottom 72dp (под FAB), в Операциях — только spacing_md (16dp); на Главной нижнего отступа у контента нет — при скролле последний блок может прилипать к нижней навигации.

**Рекомендации:**
- Вынести `top_screen_inset` (например, 24dp или 40dp) в dimens для первого элемента на экране.
- После виртуальной карты везде использовать один отступ: `spacing_lg` (24dp).
- Добавить `content_bottom_padding` (48dp или 56dp) для ScrollView/списков, чтобы контент не уходил под bottom nav.
- Везде заменять «2dp» между связанными строками на `spacing_xs`.

---

## 4. Расположение блоков и размеры

### Виртуальная карта
- Высота: minHeight 160dp, внутренний padding 16dp.
- Бейдж VIRTUAL и блок FT + FreeTips расположены корректно; баланс справа внизу.
- Проблема: у корневого FrameLayout `minHeight="0dp"` — не влияет, но избыточно.

### Карточки (MaterialCardView)
- Радиус 12dp, elevation 2dp, фон surface.
- Внутренний padding: в основном spacing_md (16dp), в форме входа и первой карточке профиля — spacing_lg (24dp). Небольшая непоследовательность.

### Списки (RecyclerView)
- item_payout: padding 16dp, marginBottom 8dp у каждого элемента.
- item_transaction: padding 16dp, marginBottom 8dp.
- Отступ между заголовком секции и списком: 8dp (Выводы) или 16dp (Операции) — лучше унифицировать (12dp или 16dp).

### Кнопки
- Основная кнопка: paddingVertical 14dp, cornerRadius 12dp (в теме).
- FAB: margin 24dp — ок.

### Экран входа
- Карточка формы на всю ширину с padding 24dp; между полями 16dp. Верхний отступ до заголовка 40dp — вынести в dimens.

**Рекомендации:**
- Унифицировать внутренний padding карточек: 16dp для списков и компактных блоков, 20–24dp для форм и «первой» карточки на экране.
- Отступ между заголовком секции и контентом: везде 12dp или 16dp (один dimen).

---

## 5. Границы

- Карточки: 12dp radius, 2dp elevation — единообразно.
- Виртуальная карта: градиентный фон с corners 12dp — ок.
- Бейдж VIRTUAL: отдельный drawable с radius 10dp.
- Чип FT: 4dp radius в drawable.
- Разделители в блоке «Статистика»: 1dp, outline с alpha 0.2 — читаемо.

**Рекомендации:**
- Явно задать stroke (обводку) карточек не требуется при тёмной теме; при желании можно добавить outline 1dp с outline color и alpha для тонкой границы.

---

## 6. Текст не должен выходить за блоки и прижиматься к краям

**Проблема:** В блоке «Статистика» и других карточках значения справа визуально прижаты к правому краю, подписи слева — к левому; при длинных строках возможен выход текста за границы.

**Внедрённые исправления:**
- В **dimens.xml** добавлен `content_inset_horizontal` (8dp) для дополнительного внутреннего отступа.
- **Статистика (fragment_home):** у внутреннего вертикального LinearLayout заданы `paddingStart` и `paddingEnd` по `content_inset_horizontal`; у подписей — `paddingEnd`, у значений — `paddingStart`, чтобы между колонками был зазор; у длинных подписей и значений — `maxLines` и `ellipsize="end"`.
- **Элементы списков (item_payout, item_transaction):** у сумм и подписей добавлены `maxLines`/`ellipsize`; у колонок — `paddingEnd`/`paddingStart` по `content_inset_horizontal`, чтобы текст не прижимался к иконке и краям.
- **Профиль, Ссылки:** у внутреннего контента карточек добавлены `paddingStart` и `paddingEnd` по `content_inset_horizontal`.

В итоге буквы не выходят за блоки и не прижаты к краям.

---

## 7. Итоговые корректировки (внедряемые)

1. **colors.xml**: добавить `chip_text` (#1C1B1F или on_primary) и использовать в виртуальной карте.
2. **dimens.xml**: добавить `text_title_large`, `text_title`, `text_subtitle`, `text_body`, `text_caption`, `text_label`; `screen_top_inset`, `content_bottom_padding`; унифицировать отступ между заголовком и контентом.
3. **Разметки**: заменить жёстко заданные размеры шрифтов и отступы на ссылки на dimens; заменить 40dp на screen_top_inset; добавить content_bottom_padding в ScrollView/контент там, где список уходит под nav; унифицировать отступ после виртуальной карты (spacing_lg везде).
4. **Стили**: при желании ввести TextAppearance для заголовка секции (один размер 18sp) и применить во всех фрагментах.
